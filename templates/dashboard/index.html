{% extends "base.html" %}

    {% block extra_head %}
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
      google.load('visualization', '1', {packages:['gauge']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Risk', {{absolute_risk}}],
          ['Age Risk', {{age_risk}}],
        
        ]);

        var options = {
          width: 800, height: 240,
          min: 1,
          max: 5,
          redFrom:  3, redTo: 5,
          yellowFrom:2, yellowTo: 3,
          greenFrom: 1, greenTo: 2,
          minorTicks: 1
        };

        var chart = new google.visualization.Gauge(document.getElementById('risk_chart_div'));
        chart.draw(data, options);
      }
    </script>

<script type='text/javascript'>
      google.load('visualization', '1', {packages:['gauge']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Smoking', {{ smoking }}],
        
        ]);

        var options = {
          width: 400, height: 240,
          min: 0,
          max: 1,
          redFrom:  0.5, redTo: 1,
          greenFrom: 0, greenTo: 0.5,
          minorTicks: 1
        };

        var chart = new google.visualization.Gauge(document.getElementById('smoking_chart_div'));
        chart.draw(data, options);
      }
    </script>


<script type='text/javascript'>
      google.load('visualization', '1', {packages:['gauge']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['BMI', {{ bmi }}],
        
        ]);

        var options = {
         min: 10,
         max: 40,
         width: 200, height: 200,
         greenFrom: 18.6, greenTo: 24.9,
         redFrom: 25, redTo: 40,
         yellowFrom:10, yellowTo: 18.5,
         minorTicks: 2
        };

        var chart = new google.visualization.Gauge(document.getElementById('bmi_chart_div'));
        chart.draw(data, options);
      }
    </script>



     {% endblock %}

{% block content %}

 
<div class="hero-unit">
  

  <h1>Dashboard</h1>
  <p>For the most accurate risk assessment, complete all of the sections below.</p>

  <h2>Progress: {{ progress_percent }}%<h2>
<div class="progress progress-info progress-striped">
<div class="bar" style="width: {{ progress_percent }}%"></div>
</div>

  <p>
    <a class="btn btn-primary btn-large" href="/risk-assessments/basic-info/{{patient.patient_id}}">
      Basic Info
    </a>
    {% if patient.basic_info_complete %}
       complete
    {% endif %}
  </p>

  {% if not user.is_authenticated %}
   <p>
    <a class="btn btn-primary btn-large" href="/accounts/signup/{{patient.patient_id}}">
      Sign Up to get a Follow Up
    </a>
  </p>
   

  {% endif %}
  
  <p>
    <a class="btn btn-primary btn-large" href="/risk-assessments/blood-pressure/{{patient.patient_id}}">
      Blood Pressure
    </a>
    {% if patient.blood_pressure_complete %}
       complete
    {% endif %}
    
  </p>
  
   <p>
    <a class="btn btn-primary btn-large" href="/risk-assessments/cholesterol/{{patient.patient_id}}">
      Cholesterol
    </a>
    {% if patient.cholesterol_complete %}
       complete
    {% endif %}

  </p>

  {% ifequal patient.diabetes "yes" %}
   <p>
    <a class="btn btn-primary btn-large" href="/risk-assessments/diabetes/{{patient.patient_id}}">
      Diabetes
    </a>
    {% if patient.diabetes_complete %}
       complete
    {% endif %}    
    
    
  </p>
  {% endifequal %}
   
    <p>
    <a class="btn btn-primary btn-large" href="/risk-assessments/more/{{patient.patient_id}}">
      More
    </a>
    {% if patient.more_complete %}
       complete
    {% endif %}
  
  <div id='risk_chart_div'></div>
  <div id='smoking_chart_div'></div> 
  <div id='bmi_chart_div'></div> 
    
  </p>
<p>    
  </p>     
</div>


{% endblock %}