{% extends "base.html" %}

    {% block extra_head %}
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
      google.load('visualization', '1', {packages:['gauge']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Risk', {{age_risk}}*20],
        
        ]);

        var options = {
          width: 800, height: 240,
          min: 1,
          max: 100,
          redFrom:  3*20, redTo: 5*20,
          yellowFrom:2*20, yellowTo: 3*20,
          greenFrom: 0, greenTo: 2*20,
          minorTicks: 10
        };

        var chart = new google.visualization.Gauge(document.getElementById('risk_chart_div'));
        chart.draw(data, options);
      }
    </script>



<script type='text/javascript'>
      google.load('visualization', '1', {packages:['gauge']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['BMI', {{ bmi }}],
        
        ]);

        var options = {
         min: 10,
         max: 40,
         width: 400, height: 240,
         greenFrom: 18.6, greenTo: 24.9,
         redFrom: 25, redTo: 40,
         yellowFrom:10, yellowTo: 18.5,
         minorTicks: 2
        };

        var chart = new google.visualization.Gauge(document.getElementById('bmi_chart_div'));
        chart.draw(data, options);
      }
    </script>



     {% endblock %}

{% block content %}

 
<div class="hero-unit">
  

  <h1>Dashboard</h1>
  <h4>Your risk is {{age_risk}} out of 5. The lowest risk category is 1 and the highest is 5.
  {% if not patient.blood_pressure_complete %}
      {% if not patient.cholesterol_complete %}
           You have not yet added your blood pressure and cholesterol infomation.
           For a more accurate assessment, please complete all of the sections below,
           although the blood pressure and cholesterol numbers are especially important.
           If you don't have this information, we can  <a HREF="/pharmacy/find">help you find it at a participating nearby pharmacy.</a>
      {% endif %}
        
  {% endif %}
  {% if not user.is_authenticated %}
  If you don't have all of this information now, you can <a HREF="/accounts/signup/{{patient.patient_id}}">create an account
  so you can retreive you infomation later.</a> 
  {% endif %}

  </h4>
  


  <p>
    <a class="btn btn-primary btn-large" href="/risk-assessments/blood-pressure/{{patient.patient_id}}">
      Blood Pressure
    </a>
    {% if patient.blood_pressure_complete %}
       complete
    {% endif %}
    
  </p>
  
   <p>
    <a class="btn btn-primary btn-large" href="/risk-assessments/cholesterol/{{patient.patient_id}}">
      Cholesterol
    </a>
    {% if patient.cholesterol_complete %}
       complete
    {% endif %}

  </p>

  {% ifequal patient.diabetes "yes" %}
   <p>
    <a class="btn btn-primary btn-large" href="/risk-assessments/diabetes/{{patient.patient_id}}">
      Diabetes
    </a>
    {% if patient.diabetes_complete %}
       complete
    {% endif %}    
    
    
  </p>
  {% endifequal %}
   
    <p>
    <a class="btn btn-primary btn-large" href="/risk-assessments/more/{{patient.patient_id}}">
      More
    </a>
    {% if patient.more_complete %}
       complete
    {% endif %}
  
  <p>
    <a class="btn btn-primary btn-large" href="/risk-assessments/basic-info/{{patient.patient_id}}">
      Change Basic Info
    </a>
    {% if patient.basic_info_complete %}
       complete
    {% endif %}
  </p>
  
  
  <div id='risk_chart_div'></div>
  <div id='smoking_chart_div'></div> 
  <div id='bmi_chart_div'></div> 
    
  </p>
<p>    

<h2>Assesment Progress: {{ progress_percent }}%<h2>
<div class="progress progress-info progress-striped">
<div class="bar" style="width: {{ progress_percent }}%"></div>
</div>
  </p>     



</div>






{% endblock %}